/* web/dice/css/style.css */
@import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;800&display=swap');

body { font-family: 'Pretendard', sans-serif; overflow: hidden; }

.tab-content { display: none; height: calc(100vh - 140px); overflow-y: auto; }
.tab-content.active { display: flex; animation: fadeIn 0.3s ease-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
#game-canvas { background: #334155; border-radius: 12px; box-shadow: inset 0 0 20px rgba(0,0,0,0.5); }
.dice-unowned { filter: grayscale(100%); opacity: 0.6; }
.stat-box { position: relative; height: 3.5rem; background-color: #f1f5f9; border-radius: 0.5rem; display: flex; align-items: center; padding: 0.5rem; }

/* 주사위 스타일 */
.dice-face {
    background-color: #f1f5f9;
    border-radius: 22%;
    display: flex; align-items: center; justify-content: center;
    position: relative;
    box-shadow: inset 0 2px 3px rgba(255, 255, 255, 1), inset 0 -2px 5px rgba(0, 0, 0, 0.1), 0 4px 6px -1px rgba(0, 0, 0, 0.2);
    transition: transform 0.1s;
}
.dice-glossy::after {
    content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 45%;
    border-radius: 22% 22% 40% 40% / 30%;
    background: linear-gradient(180deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.4) 50%, rgba(255,255,255,0) 100%);
    pointer-events: none; z-index: 10;
}
.dice-legend-style {
    border-width: 1px; border-style: solid;
    box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6), inset 0 0 0 2px var(--dice-color),
        inset 0 2px 4px rgba(255, 255, 255, 0.8), inset 0 -2px 5px rgba(0, 0, 0, 0.05),
        0 0 6px -1px var(--dice-color), 0 4px 6px -1px rgba(0, 0, 0, 0.2) !important;
}

/* 이펙트 */
@keyframes firefly-float {
    0%, 100% { transform: translate(0, 0); opacity: 0; }
    50% { opacity: 1; }
    25% { transform: translate(10px, -10px); }
    75% { transform: translate(-10px, 10px); }
}
.firefly-container { position: absolute; inset: 0; pointer-events: none; overflow: hidden; border-radius: 0.75rem; }
.firefly {
    position: absolute; width: 4px; height: 4px; background: #60a5fa;
    border-radius: 50%; box-shadow: 0 0 4px #60a5fa; opacity: 0;
}
.firefly:nth-child(1) { top: 20%; left: 20%; animation: firefly-float 3s infinite ease-in-out; animation-delay: 0s; }
.firefly:nth-child(2) { top: 80%; left: 70%; animation: firefly-float 4s infinite ease-in-out; animation-delay: 1s; }
.firefly:nth-child(3) { top: 40%; left: 80%; animation: firefly-float 3.5s infinite ease-in-out; animation-delay: 2s; }

/* 펄스 (초록) */
@keyframes pulse-green {
    0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
    100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
}
.btn-pulse-green { animation: pulse-green 2s infinite; }

@keyframes burst-ring {
    0% { transform: scale(0.8); opacity: 1; border-width: 4px; }
    100% { transform: scale(2); opacity: 0; border-width: 0; }
}
.burst-effect::after {
    content: ''; position: absolute; inset: -4px; border: 2px solid #60a5fa; border-radius: 0.75rem;
    animation: burst-ring 0.6s ease-out forwards; pointer-events: none;
}

/* 화살표 둥둥 */
@keyframes float-arrow {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
}
.arrow-float { animation: float-arrow 1s infinite ease-in-out; }

/* 팝업 컴팩트 */
.popup-compact {
    max-height: min(85vh, 32rem);
    padding: 1.25rem !important;
}

/* ------------------------------------------------ */
/* [소환 연출 스타일] */
/* ------------------------------------------------ */
#summon-overlay {
    background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);
    perspective: 1000px;
}

/* 1. 하강 */
@keyframes drop-in {
    0% { transform: translateY(-120vh) scale(0.5); opacity: 0; }
    60% { transform: translateY(20px) scale(1.1); opacity: 1; }
    80% { transform: translateY(-10px) scale(0.95); }
    100% { transform: translateY(0) scale(1); opacity: 1; }
}
.summon-drop { animation: drop-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

/* 2. 대기 (숨쉬기) */
@keyframes breathe-glow {
    0%, 100% { box-shadow: 0 0 15px var(--glow-color); }
    50% { box-shadow: 0 0 30px var(--glow-color), 0 0 10px var(--glow-color) inset; }
}
.summon-waiting { animation: breathe-glow 2s infinite ease-in-out; }

/* 3. 파동 (Ripple) */
@keyframes ripple-burst {
    0% { transform: scale(1); opacity: 0.8; border-width: 4px; }
    100% { transform: scale(2.5); opacity: 0; border-width: 0; }
}
.ripple-effect {
    position: absolute; inset: -2px; border-radius: 22%;
    border: 2px solid var(--glow-color);
    animation: ripple-burst 0.6s ease-out forwards;
    pointer-events: none;
    z-index: 0;
}

/* 4. 플래시 */
@keyframes flash-white {
    0% { opacity: 1; }
    100% { opacity: 0; }
}
.impact-flash {
    position: absolute; inset: 0; background: white; border-radius: 22%;
    animation: flash-white 0.3s ease-out forwards; pointer-events: none;
}

/* 5. 주사위 위로 이동 (부드럽게) */
@keyframes slide-up-dice {
    from { transform: translateY(0); }
    to { transform: translateY(-4rem); }
}
.dice-slide-up {
    animation: slide-up-dice 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

/* 6. 텍스트 등장 */
@keyframes fade-up {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.text-reveal { animation: fade-up 0.6s ease-out forwards; }

/* NEW 뱃지 팝 */
@keyframes pop-badge {
    0% { transform: scale(0); }
    80% { transform: scale(1.2); }
    100% { transform: scale(1); }
}
.new-badge-pop { animation: pop-badge 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }

/* ------------------------------------------------ */
/* [11회 소환 전용 스타일] */
/* ------------------------------------------------ */

/* 1. 시계방향 테두리 그리기 */
@keyframes draw-border-cw {
    0% { clip-path: polygon(0 0, 0 0, 0 0, 0 0); opacity: 1; } /* 시작 시 보임 */
    25% { clip-path: polygon(0 0, 100% 0, 100% 0, 100% 0); } 
    50% { clip-path: polygon(0 0, 100% 0, 100% 100%, 100% 100%); } 
    75% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); } 
    100% { clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%); opacity: 1; }
}

/* 테두리만 있는 박스 */
.outline-box {
    position: absolute; inset: 0;
    border: 2px solid white;
    border-radius: 22%;
    box-sizing: border-box;
    
    /* [핵심 수정] 
       1. opacity: 0 으로 기본 숨김 (안전장치)
       2. forwards -> both 변경! (딜레이 동안 0% 상태 유지) 
    */
    opacity: 0; 
    animation: draw-border-cw 0.4s linear both;
}

/* 2. 팡! 등장 (Pop In) */
@keyframes pop-in {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
}
.dice-pop-appear {
    animation: pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* 3. 이름 페이드인 (밝기 변화) */
.name-fade-in {
    animation: fade-in-text 0.3s ease-out forwards;
}
@keyframes fade-in-text {
    from { opacity: 0; filter: blur(2px); }
    to { opacity: 1; filter: blur(0); }
}

/* 그리드 레이아웃 보정 */
.summon-row {
    display: flex;
    justify-content: center;
    gap: 0.75rem; 
    margin-bottom: 1.5rem; 
}

/* 스킵 버튼 스타일 */
.skip-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.3);
    backdrop-filter: blur(4px);
    transition: all 0.2s;
}
.skip-btn:active { transform: scale(0.95); background: rgba(255, 255, 255, 0.2); }