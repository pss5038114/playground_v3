<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ê´€ë¦¬ì ì¸ì¦ - Playground V3</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; align-items: center; justify-content: center; z-index: 999; backdrop-filter: blur(3px); background: rgba(0,0,0,0.5); }
        .modal-box { background: white; padding: 25px; width: 90%; max-width: 400px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); border-radius: 15px; }
        .user-item { padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .user-item:hover { background: #f8f9fa; }
        .user-item.selected { background: #e7f1ff; border-left: 3px solid #1877f2; }
    </style>
</head>
<body>
    <div class="card admin-container">
        <h3>ê´€ë¦¬ì ìŠ¹ì¸ ì„¼í„°</h3>
        
        <div id="admin-login-box">
            <input id="admin-key-input" type="password" placeholder="ê´€ë¦¬ì ë³´ì•ˆ í‚¤" 
                   onkeyup="if(window.event.keyCode==13){loadAdminRequests()}">
            <button class="btn-primary" onclick="loadAdminRequests()">ì ‘ì†</button>
        </div>

        <div id="pending-list-area" class="hidden">
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr><th>ì•„ì´ë””</th><th>ë‹‰ë„¤ì„</th><th>ìš”ì²­íƒ€ì…</th><th>ìŠ¹ì¸/ê±°ì ˆ</th></tr>
                    </thead>
                    <tbody id="admin-user-list"></tbody>
                </table>
            </div>

            <div style="background:#fff; border:2px solid #eee; padding:20px; border-radius:15px; margin-top:30px; text-align:left;">
                <h4 style="margin-top:0; color:#1877f2;"><i class="fas fa-paper-plane"></i> ìš°í¸ ë°œì†¡ ì„¼í„°</h4>
                
                <label style="font-size:12px; font-weight:bold; color:#555;">ë°›ëŠ” ì‚¬ëŒ</label>
                <div style="display:flex; gap:5px; margin-bottom:10px;">
                    <input id="mail-receiver-display" type="text" placeholder="ë°›ëŠ” ì‚¬ëŒì„ ì„ íƒí•˜ì„¸ìš”" readonly style="margin:0; background:#f9f9f9; cursor:pointer;" onclick="openUserModal()">
                    <input id="mail-receiver-val" type="hidden"> <button class="btn-secondary" style="width:80px; margin:0;" onclick="openUserModal()">ì°¾ê¸°</button>
                </div>

                <input id="mail-title" type="text" placeholder="ìš°í¸ ì œëª©" style="margin-bottom:10px;">
                <textarea id="mail-content" placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..." 
                    style="width:100%; height:80px; padding:10px; border:1px solid #ddd; border-radius:8px; box-sizing:border-box; resize:none; margin-bottom:10px;"></textarea>

                <label style="font-size:12px; font-weight:bold; color:#555;">ì˜ˆì•½ ë°œì†¡ (ë¹„ì›Œë‘ë©´ ì¦‰ì‹œ ì „ì†¡)</label>
                <input id="mail-scheduled" type="datetime-local" style="width:100%; margin-bottom:15px;">

                <button class="btn-primary" onclick="sendAdminMail()">ìš°í¸ ë³´ë‚´ê¸°</button>
            </div>
            
            <div style="background:#f1f3f5; padding:20px; border-radius:15px; margin-top:30px;">
                <h4 style="margin-top:0;">ğŸ”“ ì˜¨ë¼ì¸ DB Browser ì ‘ì†</h4>
                <input id="db-master-key-input" type="password" placeholder="2ì°¨ ë§ˆìŠ¤í„° ë³´ì•ˆ í‚¤"
                       onkeyup="if(window.event.keyCode==13){goToDBManager()}">
                <button class="btn-primary" onclick="goToDBManager()">ë§ˆìŠ¤í„° ëª¨ë“œ ì§„ì…</button>
            </div>
        </div>
        
        <button class="btn-admin" onclick="location.href='index.html'">ë‚˜ê°€ê¸°</button>
    </div>

    <div id="user-modal" class="modal-overlay">
        <div class="modal-box">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
                <h4 style="margin:0;">ìœ ì € ì„ íƒ</h4>
                <span onclick="closeUserModal()" style="cursor:pointer; font-size:20px;">&times;</span>
            </div>
            
            <input type="text" id="user-search" placeholder="ì•„ì´ë”” ë˜ëŠ” ë‹‰ë„¤ì„ ê²€ìƒ‰..." onkeyup="filterUsers()" style="margin-bottom:10px;">
            
            <div onclick="selectUser('ALL', 'ğŸ“¢ ì „ì²´ ìœ ì € (ALL)')" class="user-item" style="background:#fff3cd; border:1px solid #ffeeba; font-weight:bold;">
                <span>ğŸ“¢ ì „ì²´ ìœ ì €ì—ê²Œ ë³´ë‚´ê¸°</span>
                <i class="fas fa-users"></i>
            </div>

            <div id="modal-user-list" style="max-height:300px; overflow-y:auto; border:1px solid #eee; border-radius:8px;">
                </div>
        </div>
    </div>
    
    <script src="js/admin.js?v=3"></script>
</body>
</html>