<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Playground V3 - Lobby</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .menu-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .menu-item { background: #fff; border: 2px solid #eee; padding: 20px; border-radius: 15px; cursor: pointer; transition: 0.3s; }
        .menu-item:hover { border-color: #1877f2; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .menu-item h4 { margin: 0 0 10px 0; color: #333; }
        .menu-item p { margin: 0; font-size: 13px; color: #777; }
    </style>
</head>
<body>
    <nav class="top-bar">
        <div class="nav-left">
            <button class="menu-btn" onclick="alert('ì‚¬ì´ë“œë°” ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤!')">â˜°</button>
            <b style="margin-left:15px; font-size:18px; color:#1877f2;">Playground V3</b>
        </div>
        <div class="nav-right">
            <div class="profile-btn" onclick="toggleDropdown(event)">
                <div class="profile-img"></div>
                <span id="nav-nick">ìœ ì €</span>
            </div>
            <div id="profile-dropdown" class="dropdown-menu">
                <button class="dropdown-item" onclick="location.href='mailbox.html'">ğŸ“© ìš°í¸í•¨</button>
                <button class="dropdown-item" onclick="location.href='mypage.html'">ğŸ‘¤ My Page</button>
                <button class="dropdown-item logout-item" onclick="handleLogout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </nav>

    <div class="card" style="max-width: 500px; margin-top: 40px;">
        <h2 id="u-welcome">ë¡œë”© ì¤‘...</h2>
        <div style="padding:20px 0; background:#f9f9f9; border-radius:15px; margin:10px 0;">
            <p style="font-size:18px; font-weight: bold;">ğŸ® ê²Œì„ ë° ì½˜í…ì¸ </p>
            <div class="menu-container">
                <div class="menu-item" onclick="startDiceGame()">
                    <h4>ğŸ² ë‹¤ì´ìŠ¤ ë””íœìŠ¤</h4>
                    <p>ì£¼ì‚¬ìœ„ë¥¼ ë°°ì¹˜í•˜ì—¬ ëª°ë ¤ì˜¤ëŠ” ì ì„ ë§‰ì•„ë‚´ì„¸ìš”!</p>
                </div>
                <div class="menu-item" style="opacity: 0.5; cursor: default;">
                    <h4>ğŸš§ ì¤€ë¹„ ì¤‘</h4>
                    <p>ë‹¤ìŒ ë¯¸ë‹ˆê²Œì„ì´ ê³§ ì¶”ê°€ë©ë‹ˆë‹¤.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const nick = sessionStorage.getItem('nickname');
        if(!nick) { 
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."); 
            location.href='index.html'; 
        } else {
            document.getElementById('u-welcome').innerText = `${nick}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤!`;
            document.getElementById('nav-nick').innerText = nick;
        }

        // ë“œë¡­ë‹¤ìš´ í† ê¸€ í•¨ìˆ˜
        function toggleDropdown(event) {
            event.stopPropagation(); // ë²„íŠ¼ í´ë¦­ ì‹œ ë¬¸ì„œ í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€
            const dropdown = document.getElementById('profile-dropdown');
            dropdown.classList.toggle('active');
        }

        // ë‹¤ë¥¸ ê³³ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
        window.onclick = function() {
            const dropdown = document.getElementById('profile-dropdown');
            if (dropdown.classList.contains('active')) {
                dropdown.classList.remove('active');
            }
        };

        function startDiceGame() {
            const sessionId = "room_" + Math.random().toString(36).substr(2, 9);
            location.href = `dice_game.html?session=${sessionId}`;
        }

        function handleLogout() {
            if(confirm("ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                sessionStorage.clear();
                location.href = 'index.html';
            }
        }
    </script>
</body>
</html>