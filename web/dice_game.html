<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dice Defense - Playground V3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/auth.js"></script>
    <style>
        body { background-color: #0f172a; color: #f8fafc; font-family: 'Pretendard', sans-serif; }
        .game-card { background: rgba(30, 41, 59, 0.7); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; }
        .tab-active { color: #facc15; border-bottom: 3px solid #facc15; }
        .dice-bg { background-color: white !important; }
        
        /* ë“±ê¸‰ë³„ íŠ¹ìˆ˜ íš¨ê³¼ */
        .rarity-legendary { box-shadow: 0 0 15px rgba(255, 255, 255, 0.6); }
        .rainbow-border {
            border-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet) 1;
        }
        .rainbow-text {
            background: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            -webkit-background-clip: text;
            background-clip: text; /* í‘œì¤€ ì†ì„± ì¶”ê°€ë¡œ ë…¸ë€ ì¤„ í•´ê²° */
            -webkit-text-fill-color: transparent;
        }

        /* êµ¬ë¶„ì„  ìŠ¤íƒ€ì¼ */
        .inventory-divider {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin: 2rem 0;
            position: relative;
        }
        .inventory-divider span {
            position: absolute;
            top: -12px;
            left: 20px;
            background: #0f172a;
            padding: 0 10px;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.4);
            font-weight: bold;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <header class="w-full bg-slate-900 border-b border-slate-800 px-6 py-4 flex justify-between items-center shadow-lg sticky top-0 z-50">
        <div class="flex items-center gap-2 cursor-pointer" onclick="location.href='home.html'">
            <span class="text-2xl">ğŸ²</span>
            <h1 class="text-xl font-black tracking-tighter text-white">DICE <span class="text-yellow-400">DEFENSE</span></h1>
        </div>
        <div class="flex items-center gap-4">
            <div class="hidden md:flex flex-col items-end">
                <span id="user-nickname" class="text-sm font-bold text-slate-200">Loading...</span>
                <span class="text-[10px] text-slate-500 uppercase tracking-widest">Player Profile</span>
            </div>
            <button onclick="GameApp.exitGame()" class="bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/50 px-4 py-1.5 rounded-full text-xs font-bold transition-all">
                EXIT
            </button>
        </div>
    </header>

    <main class="flex-1 w-full max-w-7xl mx-auto p-4 md:p-6 flex flex-col gap-6">
        <nav class="flex justify-around md:justify-start md:gap-12 border-b border-slate-800 text-sm font-bold">
            <button onclick="GameApp.switchTab('play')" class="nav-btn py-4 px-2 tab-active" data-target="view-play">BATTLE</button>
            <button onclick="GameApp.switchTab('deck')" class="nav-btn py-4 px-2 text-slate-500 hover:text-slate-300" data-target="view-deck">DECK & UPGRADE</button>
            <button onclick="GameApp.switchTab('shop')" class="nav-btn py-4 px-2 text-slate-500 hover:text-slate-300" data-target="view-shop">SHOP</button>
            <button onclick="GameApp.switchTab('social')" class="nav-btn py-4 px-2 text-slate-500 hover:text-slate-300" data-target="view-social">SOCIAL</button>
        </nav>

        <div class="relative flex-1">
            <section id="view-play" class="game-view grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="game-card p-8 flex flex-col items-center justify-center text-center gap-4 hover:scale-[1.01] transition-transform">
                    <div class="w-20 h-20 bg-yellow-400/20 rounded-full flex items-center justify-center text-4xl mb-2">âš”ï¸</div>
                    <h2 class="text-2xl font-bold">ëŒ€ì „ ëª¨ë“œ</h2>
                    <p class="text-slate-400 text-sm mb-4">ì‹¤ì‹œê°„ ìœ ì €ë“¤ê³¼ ì‹¤ë ¥ì„ ê²¨ë£¨ê³ <br>ë­í‚¹ í¬ì¸íŠ¸ë¥¼ íšë“í•˜ì„¸ìš”.</p>
                    <button id="btn-start-pvp" class="w-full max-w-xs bg-yellow-400 hover:bg-yellow-500 text-slate-900 font-black py-4 rounded-xl shadow-[0_0_20px_rgba(250,204,21,0.3)] transition-all">
                        PVP START
                    </button>
                </div>
                <div class="game-card p-8 flex flex-col items-center justify-center text-center gap-4 hover:scale-[1.01] transition-transform">
                    <div class="w-20 h-20 bg-blue-400/20 rounded-full flex items-center justify-center text-4xl mb-2">ğŸ¤</div>
                    <h2 class="text-2xl font-bold">í˜‘ë™ ëª¨ë“œ</h2>
                    <p class="text-slate-400 text-sm mb-4">ë™ë£Œì™€ í˜ì„ í•©ì³ ë°€ë ¤ì˜¤ëŠ”<br>ì ë“¤ì„ ëê¹Œì§€ ë§‰ì•„ë‚´ì„¸ìš”.</p>
                    <button id="btn-start-coop" class="w-full max-w-xs bg-blue-500 hover:bg-blue-600 text-white font-black py-4 rounded-xl shadow-[0_0_20px_rgba(59,130,246,0.3)] transition-all">
                        CO-OP START
                    </button>
                </div>
                
                <div id="game-canvas-container" class="fixed inset-0 bg-slate-950 hidden z-[60] flex flex-col">
                    <div class="bg-slate-900 p-4 flex justify-between items-center border-b border-slate-800">
                        <div class="flex gap-6 text-sm">
                            <span>WAVE <b id="game-wave" class="text-yellow-400">1</b></span>
                            <span>SP <b id="game-sp" class="text-blue-400">100</b></span>
                        </div>
                        <button onclick="GameApp.stopGameUI()" class="text-slate-500 hover:text-white text-xs underline">SURRENDER</button>
                    </div>
                    <div class="flex-1 flex items-center justify-center overflow-hidden">
                        <canvas id="gameCanvas" class="max-w-full max-h-full bg-slate-900 shadow-2xl"></canvas>
                    </div>
                    <div class="p-6 bg-slate-900/80 backdrop-blur-md flex justify-center gap-4">
                        <button onclick="GameApp.spawnDice()" class="w-24 h-20 bg-blue-600 hover:bg-blue-500 rounded-2xl font-bold border-b-4 border-blue-800 active:border-b-0 active:translate-y-1 transition-all">
                            ì†Œí™˜<br><span class="text-xs opacity-70">10 SP</span>
                        </button>
                    </div>
                </div>
            </section>

            <section id="view-deck" class="game-view hidden">
                <div class="game-card p-6 mb-8">
                    <h2 class="text-xl font-bold mb-6 flex items-center gap-2 text-slate-300">
                        <span class="text-yellow-400">â—</span> MY DECK CONFIG
                    </h2>
                    <div class="grid grid-cols-5 gap-4">
                        <div class="aspect-square rounded-xl bg-slate-800/50 border-2 border-dashed border-slate-700 flex items-center justify-center text-slate-600">1</div>
                        <div class="aspect-square rounded-xl bg-slate-800/50 border-2 border-dashed border-slate-700 flex items-center justify-center text-slate-600">2</div>
                        <div class="aspect-square rounded-xl bg-slate-800/50 border-2 border-dashed border-slate-700 flex items-center justify-center text-slate-600">3</div>
                        <div class="aspect-square rounded-xl bg-slate-800/50 border-2 border-dashed border-slate-700 flex items-center justify-center text-slate-600">4</div>
                        <div class="aspect-square rounded-xl bg-slate-800/50 border-2 border-dashed border-slate-700 flex items-center justify-center text-slate-600">5</div>
                    </div>
                </div>

                <h3 class="text-lg font-bold mb-6 text-slate-400 flex justify-between">
                    ë³´ìœ  ì£¼ì‚¬ìœ„ <span id="inventory-count" class="text-xs font-normal">0/0</span>
                </h3>
                
                <div id="owned-dice-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4"></div>

                <div class="inventory-divider"><span>ë¯¸ë³´ìœ  ì£¼ì‚¬ìœ„</span></div>

                <div id="unowned-dice-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 opacity-60"></div>
            </section>

            <section id="view-shop" class="game-view hidden p-4">
                <div class="flex justify-between items-center mb-8">
                    <h2 class="text-2xl font-black">PREMIUM SHOP</h2>
                    <div class="bg-slate-800 px-6 py-2 rounded-full border border-slate-700 shadow-inner">
                        <span class="text-yellow-400 font-bold">ğŸ« TICKET: </span>
                        <span id="shop-ticket-count" class="font-mono text-lg">0</span>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <div class="game-card p-8 text-center border-slate-700 hover:border-blue-500 transition-all group">
                        <div class="text-6xl mb-6 group-hover:scale-110 transition-transform">ğŸ“¦</div>
                        <h3 class="font-bold text-xl mb-2">ì‘ì€ ì£¼ì‚¬ìœ„ ìƒì</h3>
                        <p class="text-xs text-slate-500 mb-8">ì£¼ì‚¬ìœ„ ì¹´ë“œ 1ë§¤ë¥¼ ëœë¤í•˜ê²Œ íšë“í•©ë‹ˆë‹¤.</p>
                        <button onclick="GameApp.openBox(1)" class="w-full bg-slate-700 hover:bg-slate-600 py-4 rounded-2xl font-bold shadow-lg">ğŸ« 1ê°œ ì‚¬ìš©</button>
                    </div>
                    <div class="game-card p-8 text-center border-yellow-500/50 bg-yellow-500/5 hover:bg-yellow-500/10 transition-all group">
                        <div class="text-6xl mb-6 group-hover:scale-110 transition-transform">ğŸ</div>
                        <h3 class="font-bold text-xl mb-2 text-yellow-400">ê±°ëŒ€ ì£¼ì‚¬ìœ„ ìƒì</h3>
                        <p class="text-xs text-slate-500 mb-8">ì£¼ì‚¬ìœ„ ì¹´ë“œ 11ë§¤ë¥¼ íšë“í•©ë‹ˆë‹¤. (10+1 ë³´ë„ˆìŠ¤)</p>
                        <button onclick="GameApp.openBox(10)" class="w-full bg-yellow-500 hover:bg-yellow-600 text-slate-900 py-4 rounded-2xl font-bold shadow-lg">ğŸ« 10ê°œ ì‚¬ìš©</button>
                    </div>
                </div>
                
                <div class="mt-12 text-center">
                    <button onclick="GameApp.addTestTickets()" class="text-[10px] text-slate-600 border border-slate-800 px-4 py-2 rounded-lg hover:text-slate-400 transition-colors uppercase tracking-widest">
                        Debug: Add +10 Tickets
                    </button>
                </div>
            </section>

            <section id="view-social" class="game-view hidden p-8 text-center text-slate-500">
                ì†Œì…œ ê¸°ëŠ¥ ì—…ë°ì´íŠ¸ ì¤€ë¹„ ì¤‘...
            </section>
        </div>
    </main>

    <div id="upgrade-modal" class="fixed inset-0 bg-black/90 hidden z-[100] flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-slate-900 w-full max-w-sm rounded-[2.5rem] p-10 border border-slate-700 text-center shadow-2xl">
            <div id="modal-dice-container" class="w-32 h-32 mx-auto rounded-3xl mb-8 border-4 dice-bg flex items-center justify-center text-5xl"></div>
            <h2 id="modal-dice-name" class="text-3xl font-black mb-2">ì£¼ì‚¬ìœ„</h2>
            <p id="modal-dice-rarity" class="text-xs font-bold tracking-widest uppercase mb-4 text-slate-500">COMMON</p>
            <div id="modal-dice-class" class="text-yellow-400 font-black text-xl mb-8 italic">CLASS 1</div>
            
            <div class="flex gap-4">
                <button onclick="GameApp.closeModal()" class="flex-1 bg-slate-800 hover:bg-slate-700 py-4 rounded-2xl font-bold transition-colors">CLOSE</button>
                <button id="modal-upgrade-btn" class="flex-1 bg-green-600 hover:bg-green-500 disabled:opacity-30 disabled:cursor-not-allowed py-4 rounded-2xl font-bold transition-all shadow-lg">CLASS UP</button>
            </div>
        </div>
    </div>

    <script src="js/dice_game.js"></script>
</body>
</html>